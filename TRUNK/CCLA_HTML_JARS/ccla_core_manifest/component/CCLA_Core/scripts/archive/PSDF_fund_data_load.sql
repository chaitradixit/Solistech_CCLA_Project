-- Update name of Public Sector company
UPDATE REF_COMPANY SET COMPANY_CODE = 'PSIC' WHERE COMPANY_ID = 4;

-- Add new PS fund
REM INSERTING into FUND
Insert into FUND (FUND_CODE,COMPANY_ID,FUND_STATUS_ID,FUND_TYPECODE_ID,INCOME_TYPECODE_ID,FUND_NAME,OPENINGDATE,DISPLAYNAME,CHAPSCODE,FUNDGROUPID,LAST_UPDATED,FUND_SHORT_NAME,FUND_DEFCODE_ID) values ('PS','4',1,1,1,'PSDF FUND',null,null,null,null,null,null,8);

-- Fixes
ALTER TABLE ACCOUNT DISABLE CONSTRAINT FUND_ACCOUNT_FK;
ALTER TABLE FUND_INVESTMENT_INTENTION DISABLE CONSTRAINT FUND_INVESTINT_FK;
ALTER TABLE FUND_PROCESS_DETAILS DISABLE CONSTRAINT FUND_FUNDPROCESSDETAILS_FK;
ALTER TABLE FUND_PRICE DISABLE CONSTRAINT FUND_FUND_PRICE_FK;
ALTER TABLE FUND_EOD DISABLE CONSTRAINT FUND_FUND_EOD_FK;
ALTER TABLE FUND_NAV_AUDIT DISABLE CONSTRAINT FUND_FUND_NAV_AUDIT_FK;
ALTER TABLE REF_SHARE_CLASS_GROUP DISABLE CONSTRAINT FUND_SHARE_CLASS_GROUP_FK;

-- UCMADMIN
ALTER TABLE CCLA_CAMPAIGNS DISABLE CONSTRAINT CCLA_CAMPAIGNS_FK;

UPDATE FUND SET FUND_CODE = 'PC' WHERE FUND_CODE = 'PS';
UPDATE FUND SET FUND_NAME = 'PSDF Capital Fund', DISPLAYNAME = 'PSDF Capital Fund' WHERE FUND_CODE = 'PC';
Insert into FUND (FUND_CODE,COMPANY_ID,FUND_STATUS_ID,FUND_TYPECODE_ID,INCOME_TYPECODE_ID,FUND_NAME,OPENINGDATE,DISPLAYNAME,CHAPSCODE,FUNDGROUPID,LAST_UPDATED,FUND_SHORT_NAME,FUND_DEFCODE_ID) values ('PI','4',1,1,1,'PSDF Income Fund',null,'PSDF Income Fund',null,null,null,null,8);



UPDATE ACCOUNT SET FUND_CODE = 'PC' WHERE FUND_CODE = 'PS';
UPDATE FUND_INVESTMENT_INTENTION SET FUND_CODE = 'PC' WHERE FUND_CODE = 'PS';
UPDATE FUND_PROCESS_DETAILS SET FUND_CODE = 'PC' WHERE FUND_CODE = 'PS';
UPDATE FUND_PRICE SET FUND_CODE = 'PC' WHERE FUND_CODE = 'PS';
UPDATE FUND_EOD SET FUND_CODE = 'PC' WHERE FUND_CODE = 'PS';
UPDATE FUND_NAV_AUDIT SET FUND_CODE = 'PC' WHERE FUND_CODE = 'PS';
UPDATE REF_SHARE_CLASS_GROUP SET FUND_CODE = 'PC' WHERE FUND_CODE = 'PS';
-- UCMADMIN
UPDATE CCLA_CAMPAIGNS SET FUND_CODE = 'PC' WHERE FUND_CODE = 'PS';

-- Re-enable constraints
ALTER TABLE ACCOUNT                   ENABLE CONSTRAINT FUND_ACCOUNT_FK;
ALTER TABLE FUND_INVESTMENT_INTENTION ENABLE CONSTRAINT FUND_INVESTINT_FK;
ALTER TABLE FUND_PROCESS_DETAILS      ENABLE CONSTRAINT FUND_FUNDPROCESSDETAILS_FK;
ALTER TABLE FUND_PRICE                ENABLE CONSTRAINT FUND_FUND_PRICE_FK;
ALTER TABLE FUND_EOD                  ENABLE CONSTRAINT FUND_FUND_EOD_FK;
ALTER TABLE FUND_NAV_AUDIT            ENABLE CONSTRAINT FUND_FUND_NAV_AUDIT_FK;
ALTER TABLE REF_SHARE_CLASS_GROUP     ENABLE CONSTRAINT FUND_SHARE_CLASS_GROUP_FK;