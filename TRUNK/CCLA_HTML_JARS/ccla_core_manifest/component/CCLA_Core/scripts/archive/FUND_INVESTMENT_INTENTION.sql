/*

NO NEED TO RUN THIS SCRIPT - already executed on dev/UAT/live. 

Created: 01/11/2010
Modified: 28/04/2011
Project: CCLA 
Model: Central Database
Company: Kainos Software
Author: Donna Hull
Version: 6.8
Database: Oracle 11g Release 1
*/

-- Early creation of FUND_INVESTMENT_INTENTION

-- Table FUND_INVESTMENT_INTENTION

CREATE TABLE FUND_INVESTMENT_INTENTION(
  INVESTMENT_INTENTION_ID Number(15,0) CONSTRAINT INVESTINT_ID_NN NOT NULL,
  FUND_CODE Varchar2(2 CHAR) CONSTRAINT INVESTINT_FUNDCODE_NN NOT NULL,
  ORGANISATION_ID Number(15,0) NOT NULL,
  PERSON_ID Number(15,0),
  CAMPAIGN_ID Number(15,0),
  CASH Number(20,6),
 UNITS Number(20,6),
  DATE_ADDED Timestamp(6) CONSTRAINT INVESTINT_DATEADDED_NN NOT NULL,
  LAST_UPDATED Timestamp(6) CONSTRAINT INVESTINT_LASTUPDATEDBY_NN NOT NULL,
  LAST_UPDATED_BY Varchar2(50 )
)
/

-- Add keys for table FUND_INVESTMENT_INTENTION

ALTER TABLE FUND_INVESTMENT_INTENTION ADD CONSTRAINT INVESTMENT_INTENTION_PK PRIMARY KEY (INVESTMENT_INTENTION_ID)
/

-- Table and Columns comments section
  
COMMENT ON TABLE FUND_INVESTMENT_INTENTION IS 'Stores the investment intentions for a given Organisation/Fund.'
/
COMMENT ON COLUMN FUND_INVESTMENT_INTENTION.ORGANISATION_ID IS 'The Organisation that conveyed the intention'
/
COMMENT ON COLUMN FUND_INVESTMENT_INTENTION.PERSON_ID IS 'The person who conveyed or last amended the intention - should be related to the given Organisation'
/

-- Create relationships section ------------------------------------------------- 

CREATE INDEX FUND_INVESTINT_IX ON FUND_INVESTMENT_INTENTION (FUND_CODE) 
/
ALTER TABLE FUND_INVESTMENT_INTENTION ADD CONSTRAINT FUND_INVESTINT_FK FOREIGN KEY (FUND_CODE) REFERENCES FUND (FUND_CODE)
/

CREATE INDEX ORG_INVESTINT_IX ON FUND_INVESTMENT_INTENTION (ORGANISATION_ID) 
/
ALTER TABLE FUND_INVESTMENT_INTENTION ADD CONSTRAINT ORG_INVESTINT_FK FOREIGN KEY (ORGANISATION_ID) REFERENCES ORGANISATION (ORGANISATION_ID)
/

CREATE INDEX PERSON_INVESTINT_IX ON FUND_INVESTMENT_INTENTION (PERSON_ID) 
/
ALTER TABLE FUND_INVESTMENT_INTENTION ADD CONSTRAINT PERSON_INVESTINT_FK FOREIGN KEY (PERSON_ID) REFERENCES PERSON (PERSON_ID)
/

CREATE INDEX USERS_INVESTINT_UPDATED_IX ON FUND_INVESTMENT_INTENTION (LAST_UPDATED_BY) 
/
ALTER TABLE FUND_INVESTMENT_INTENTION ADD CONSTRAINT USERS_INVESTINT_UPDATED_FK FOREIGN KEY (LAST_UPDATED_BY) REFERENCES UCMADMIN.USERS (DNAME)
/

--CREATE INDEX CAMP_INVESTINTENT_IX ON FUND_INVESTMENT_INTENTION (CAMPAIGN_ID) 
--/
--ALTER TABLE FUND_INVESTMENT_INTENTION ADD CONSTRAINT CAMP_INVESTINTENT_FK FOREIGN KEY (CAMPAIGN_ID) REFERENCES CAMPAIGN (CAMPAIGN_ID)
--/
