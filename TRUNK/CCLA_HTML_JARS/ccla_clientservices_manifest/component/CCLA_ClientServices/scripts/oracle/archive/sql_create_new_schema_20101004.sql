/* 	Latest schema file, should supersede all previous ones. 

	Refactoring Views for new db CCLA Schema
	
*/

/*VIEW CCLA_ACTIVITY_NOTE*/

CREATE OR REPLACE FORCE VIEW "UCMADMIN"."CCLA_ACTIVITY_NOTE" ("ACTIVITY_ID", "PROCESS_ID", "INTERACTION_ID", "PERSON_ID", "ORGANISATION_ID", "USER_ID", "ACTIVITY_DATE", "ACTIVITY_TYPE", "ACTIVITY_ACTION", "ERROR", "NOTE_ID", "NOTE")
AS
  SELECT act."ACTIVITY_ID",
    act."PROCESS_ID",
    act."INTERACTION_ID",
    act."PERSON_ID",
    act."ORGANISATION_ID",
    act."USER_ID",
    act."ACTIVITY_DATE",
    act."ACTIVITY_TYPE",
    act."ACTIVITY_ACTION",
    act."ERROR",
    notes.note_id,
    notes.note
  FROM CCLA_ACTIVITY act
  LEFT JOIN CCLA_NOTES notes
  ON (act.NOTE_ID = notes.NOTE_ID);
  
  /*CCLA_PROCESS_ACTIVITY View*/
  CREATE OR REPLACE FORCE VIEW "UCMADMIN"."CCLA_PROCESS_ACTIVITY" ("PROCESS_ID", "ACTIVITY_ID", "PERSON_ID", "ORGANISATION_ID", "USER_ID", "ACTIVITY_DATE", "ACTIVITY_TYPE", "ACTIVITY_ACTION", "ERROR", "PROCESS_STATUS", "PROCESS_DATE", "LAST_ACTION", "PROCESS_ENTITY_ID", "CAMPAIGN_NAME")
AS
  SELECT pr."PROCESS_ID",
    act."ACTIVITY_ID",
    act."PERSON_ID",
    act."ORGANISATION_ID",
    act."USER_ID",
    act."ACTIVITY_DATE",
    act."ACTIVITY_TYPE",
    act."ACTIVITY_ACTION",
    act."ERROR",
    pr.PROCESS_STATUS,
    pr.PROCESS_DATE,
    pr.LAST_ACTION,
    pr.ORGANISATION_ID AS PROCESS_ENTITY_ID,
    cam.NAME     AS CAMPAIGN_NAME
  FROM CCLA_ACTIVITY act
  LEFT JOIN CCLA_PROCESS pr
  ON (act.PROCESS_ID=pr.PROCESS_ID)
  LEFT JOIN CCLA_CAMPAIGNS cam
  ON (pr.CAMPAIGN_ID = cam.CAMPAIGN_ID);
  
  /*CCLA_PROCESS_LAST_ACTIVITY View*/
  CREATE OR REPLACE FORCE VIEW "UCMADMIN"."CCLA_PROCESS_LAST_ACTIVITY" ("PROCESS_ID", "ACTIVITY_ID", "PERSON_ID", "ORGANISATION_ID", "USER_ID", "ACTIVITY_DATE", "ACTIVITY_TYPE", "ACTIVITY_ACTION", "ERROR", "PROCESS_STATUS", "PROCESS_DATE", "LAST_ACTION", "PROCESS_ENTITY_ID", "CAMPAIGN_ID", "CAMPAIGN_NAME")
AS
  SELECT pr."PROCESS_ID",
    act."ACTIVITY_ID",
    act."PERSON_ID",
    act."ORGANISATION_ID",
    act."USER_ID",
    act."ACTIVITY_DATE",
    act."ACTIVITY_TYPE",
    act."ACTIVITY_ACTION",
    act."ERROR",
    pr.PROCESS_STATUS,
    pr.PROCESS_DATE,
    pr.LAST_ACTION,
    pr.ORGANISATION_ID AS PROCESS_ENTITY_ID,
    pr.CAMPAIGN_ID,
    cam.NAME AS CAMPAIGN_NAME
  FROM CCLA_PROCESS pr
  LEFT JOIN CCLA_ACTIVITY act
  ON (act.PROCESS_ID=pr.PROCESS_ID)
  INNER JOIN CCLA_CAMPAIGNS cam
  ON (pr.CAMPAIGN_ID = cam.CAMPAIGN_ID)
  WHERE ACTIVITY_ID  =
    (SELECT MAX(ACTIVITY_ID)
    FROM CCLA_ACTIVITY
    WHERE CCLA_ACTIVITY.PROCESS_ID = pr.PROCESS_ID
    );

	DROP PUBLIC SYNONYM ACCOUNT_VALUE;
  CREATE PUBLIC SYNONYM ACCOUNT_VALUE FOR CCLA.ACCOUNT_VALUE;
	
/* Links Account table to its related reference tables, including Account Value if applicable.
*/
CREATE OR REPLACE FORCE VIEW "UCMADMIN"."ACCOUNT_EXTENDED" ("ACCOUNT_ID", "ACC_ACCOUNT_CODE", "MANDATED_ACCOUNT_ID", "INCOME_DISTRIBUTION_METHOD", "FUND_CODE", "ACCOUNT_STATUS_ID", "AURORA_ACCOUNT", "ACCOUNTNUMBER", "ACCNUMEXT", "SUBTITLE", "DATE_OPENED", "SHARE_CLASS", "REQ_SIGNATURES", "IS_EXCLUSIVE", "AML_CHECK_OVERRIDE_USER", "LAST_UPDATED", "ACCOUNT_STATUS_NAME", "SHORT_NAME", "IDM_NAME", "ACC_CASH", "ACC_UNITS", "DATE_LAST_REFRESH")
AS
  SELECT acc."ACCOUNT_ID",
    acc."ACC_ACCOUNT_CODE",
    acc."MANDATED_ACCOUNT_ID",
    acc."INCOME_DISTRIBUTION_METHOD",
    acc."FUND_CODE",
    acc."ACCOUNT_STATUS_ID",
    acc."AURORA_ACCOUNT",
    acc."ACCOUNTNUMBER",
    acc."ACCNUMEXT",
    acc."SUBTITLE",
    acc."DATE_OPENED",
    acc."SHARE_CLASS",
    acc."REQ_SIGNATURES",
    acc."IS_EXCLUSIVE",
    acc."AML_CHECK_OVERRIDE_USER",
    acc."LAST_UPDATED",
    accStatus.ACCOUNT_STATUS_NAME,
    accStatus.SHORT_NAME,
    incDistMethod.IDM_NAME,
    accValue.ACC_CASH,
    accValue.ACC_UNITS,
    accValue.DATE_LAST_REFRESH
  FROM ACCOUNT acc
  INNER JOIN REF_ACCOUNT_STATUS accStatus
  ON (acc.ACCOUNT_STATUS_ID = accStatus.ACCOUNT_STATUS_ID)
  INNER JOIN REF_INCOME_DIST_METHOD incDistMethod
  ON (acc.INCOME_DISTRIBUTION_METHOD = incDistMethod.IDM_CODE)
  LEFT JOIN ACCOUNT_VALUE accValue
  ON (acc.ACCOUNT_ID = accValue.ACCOUNT_ID);
  
  
  /*  rename column on person table */
  
  alter table PERSON rename column LAST_NAME to SECOND_NAME;
  
  /*Rename ENTITY_ID column*/
  ALTER TABLE CCLA_ENTITY_CHECK RENAME COLUMN ENTITY_ID TO ORGANISATION_ID;
  
  /* New Interaction record table to conform with new CCLA tablespace. Replaces CCLA_INTERACTION
*/
CREATE TABLE CCLA_INTERACTION
  (
    "INTERACTION_ID"        NUMBER(10,0),
	
	"USER_ID"      			VARCHAR2(48 CHAR),
	"INTERACTION_DATE"		TIMESTAMP(6),
	
    "ORGANISATION_ID"       NUMBER(15,0),
    "PERSON_ID"         	NUMBER(15,0),
	"ACCOUNT_ID"			NUMBER(15,0),
	
	"CONFIRM_TYPES"			VARCHAR2(48 CHAR),
	"CONFIRM_OTHER"			VARCHAR2(48 CHAR),
    "INTERACTION_TYPE"      VARCHAR2(48 CHAR),
	
    "SUBJECT_ID"         	NUMBER(15,0),
	"CATEGORY_ID"			NUMBER(15,0),
	
	"IS_QUERY"				VARCHAR2(1 CHAR),
	"IS_COMPLAINT"			VARCHAR2(1 CHAR),
	"IS_BREACH"				VARCHAR2(1 CHAR),
	"IS_ERROR"				VARCHAR2(1 CHAR),
	
    "CAMPAIGN_ID"         	NUMBER(10,0),
	"JOB_ID"				VARCHAR2(20 CHAR),
    "OUTCOME"         		VARCHAR2(64 CHAR),
    "INTERACTION_STATUS"    VARCHAR2(96 CHAR),
	
    "ASSIGNEE"         		VARCHAR2(96 CHAR),
    "DEADLINE"             	TIMESTAMP (6),
	
	"LAST_UPDATED"			TIMESTAMP (6),
	
	CONSTRAINT "INTERACTION_PK" 			PRIMARY KEY ("INTERACTION_ID") ENABLE,
	CONSTRAINT "INTERACTION_SUBJECT_FK" 	FOREIGN KEY ("SUBJECT_ID") REFERENCES "CCLA_INTERACTION_SUBJECT" ("INTERACTION_SUBJECT_ID")  ENABLE,
	CONSTRAINT "INTERACTION_CATEGORY_FK" 	FOREIGN KEY ("CATEGORY_ID") REFERENCES "CCLA_INTERACTION_CATEGORY" ("INTERACTION_CATEGORY_ID")  ENABLE,
	CONSTRAINT "INTERACTION_PERSON_FK"		FOREIGN KEY ("PERSON_ID") REFERENCES "PERSON" ("PERSON_ID") ENABLE,
	CONSTRAINT "INTERACTION_ORGANISATION_FK"		FOREIGN KEY ("ORGANISATION_ID") REFERENCES "ORGANISATION" ("ORGANISATION_ID") ENABLE,
	CONSTRAINT "INTERACTION_ACCOUNT_FK"		FOREIGN KEY ("ACCOUNT_ID") REFERENCES "ACCOUNT" ("ACCOUNT_ID") ENABLE
	
  ); 
  
  /*Updated view for new CCLA Schema*/
  CREATE OR REPLACE FORCE VIEW "UCMADMIN"."CCLA_INTERACTIONS_EXT" 
("INTERACTION_ID", "USER_ID", "JOB_ID", "INTERACTION_DATE", "ORGANISATION_ID", "PERSON_ID", "CONFIRM_TYPES", "CONFIRM_OTHER", "INTERACTION_TYPE", "SUBJECT", "CATEGORY", "IS_QUERY", "IS_COMPLAINT", "IS_BREACH", "IS_ERROR", "CAMPAIGN_ID", "OUTCOME", "INTERACTION_STATUS", "ASSIGNEE", "DEADLINE", "LAST_UPDATED", "NAME", "FULL_NAME", "TITLE", "FIRST_NAME", "SECOND_NAME")
AS
  SELECT I."INTERACTION_ID",
    I."USER_ID",
    I."JOB_ID",
    I."INTERACTION_DATE",
    I."ORGANISATION_ID",
    I."PERSON_ID",
    I."CONFIRM_TYPES",
    I."CONFIRM_OTHER",
    I."INTERACTION_TYPE",
    S."SUBJECT",
    C."CATEGORY",
    I."IS_QUERY",
    I."IS_COMPLAINT",
    I."IS_BREACH",
    I."IS_ERROR",
    I."CAMPAIGN_ID",
    I."OUTCOME",
    I."INTERACTION_STATUS",
    I."ASSIGNEE",
    I."DEADLINE",
    I."LAST_UPDATED",
    O.ORGANISATION_NAME,
    P.FULL_NAME,
    T.TITLE,
    P.FIRST_NAME,
    P.SECOND_NAME
  FROM CCLA_INTERACTION I
  LEFT JOIN ORGANISATION O ON (I.ORGANISATION_ID = O.ORGANISATION_ID)
  LEFT JOIN PERSON P ON (I.PERSON_ID = P.PERSON_ID)
  LEFT JOIN CCLA_INTERACTION_CATEGORY C ON (I.CATEGORY_ID = C.INTERACTION_CATEGORY_ID)
  LEFT JOIN CCLA_INTERACTION_SUBJECT S ON (I.SUBJECT_ID = S.INTERACTION_SUBJECT_ID)
  LEFT JOIN REF_TITLE T ON (P.TITLE_ID = T.TITLE_ID);
  
  /* recreate the foreign key on ccla_identity_check */
  ALTER TABLE CCLA_IDENTITY_CHECK DROP FOREIGN KEY IDENTITY_CHECK_FK;
  ALTER TABLE CCLA_IDENTITY_CHECK ADD constraint "IDENTITY_CHECK_FK" foreign key ("PERSON_ID") REFERENCES PERSON("PERSON_ID") ENABLE;
  
  /*Renames the table REF_ORG_IDENTIFERS to REF_ORG_IDENTIFIERS*/
  ALTER TABLE REF_ORG_IDENTIFERS RENAME TO REF_ORG_IDENTIFIERS;
  
  /* Run these two statements as SYSDBA. */
  DROP PUBLIC SYNONYM "REF_ORG_IDENTIFERS";
  CREATE PUBLIC SYNONYM REF_ORG_IDENTIFIERS FOR CCLA.REF_ORG_IDENTIFIERS;
 

REM INSERTING into CCLA_INTERACTION_SUBJECT
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (1,'Mandate/AML');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (2,'PSDF');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (3,'General');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (4,'New Enquiry');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (5,'Workflow');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (6,'Book Orders');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (7,'Statements');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (8,'Applications');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (9,'Interest Rate');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (10,'Prices');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (11,'IVS');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (12,'Help with form');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (13,'Withdrawal Enquiry');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (14,'Deposit Enquiry');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (15,'Transaction Enquiry');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (16,'Referrals  - Investment Guidance');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (17,'Complaints/Errors');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (18,'Form Request');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (19,'Additional Accounts');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (20,'Bank Details');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (21,'Chasers/Frozen Accounts');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (22,'Lunatics');
Insert into CCLA_INTERACTION_SUBJECT (INTERACTION_SUBJECT_ID,SUBJECT) values (23,'Stationery Request');

  
  
 REM INSERTING into CCLA_INTERACTION_CATEGORY
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (1,1,'Original not received/Client to complete');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (2,1,'Account has Zero balance/Client wants to close');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (3,1,'Mandate received but CCLA records not updated');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (4,1,'Mandate returned - what is status?');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (5,1,'Mandate has been IVS checked?');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (6,1,'Confirmation of update sent to client why in population?');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (7,1,'Internal records were updated - why in population?');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (8,1,'Nominee issue');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (9,1,'Not prepared to complete form');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (10,1,'Client is investigating');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (11,1,'Recently sent BAU mandate');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (12,2,'Request Details');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (13,2,'Request to Enroll');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (14,2,'Form not received');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (15,2,'Change to intentions');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (16,3,'Returned Dividends - Investigate Write/Call');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (17,3,'Returned Mail - Investigate Write/Call');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (18,3,'Frozen Accounts - Investigate Write/Call');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (19,3,'Follow-up call for new business enquiry');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (20,3,'KYC follow-up call to new clients');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (21,3,'Newly-registered Charities Log');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (22,3,'New Scottish Charities Log');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (23,3,'Web Enquiry Log');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (24,3,'Send out new enquiry placs');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (25,3,'Check, sign and upload outgoing letters');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (26,3,'Email query - Investigate Write/Call');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (27,3,'COO Form for stationary book order');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (28,3,'Complaints - Investigate/liaise with Compliance/Write');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (29,3,'COO referral form for errors/queries');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (30,3,'Document chaser (Athena) - Investigate Write/Call');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (31,3,'Eligibility (Athena) - Investigate Write/Call');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (32,5,'Query from Transaction team - Clarification required (no need to contact client)');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (33,5,'Query from Transaction team - Clarification required (contact client)');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (34,5,'Verify large transactions with client');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (35,5,'Mandate Referral - Clarification required (no need to contact client)');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (36,5,'Mandate Referral - Clarification required (contact client)');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (37,5,'Application Referral - Clarification required (no need to contact client)');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (38,5,'Application Referral - Clarification required (contact client)');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (39,5,'Audit Certificate query');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (40,5,'AML referral - Investigate and override through Compliance');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (41,5,'AML referral - Investigate and write to client');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (42,18,'COIF Brochure/Mandate');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (43,18,'CBF Brochure/Mandate');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (44,18,'LAMIT Brochure/Mandate');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (45,18,'PSDF Brochure/Mandate');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (46,18,'General CCLA Materials');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (47,18,'Multiple Documents (see note)');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (68,23,'Amendment to Income & Withdrawal Payments');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (69,23,'Application Form ');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (70,23,'Application Form to Purchase Additional Units Over a Period');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (71,23,'Application Form to Sell Units Over a Period');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (72,23,'Application to open additional Deposit Fund Account');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (73,23,'Application to open additional Unitised Account');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (74,23,'Authorised Signatory Mandate Form');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (75,23,'Bank List');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (76,23,'CCLA for Charities Fund Guide Brochure');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (77,23,'Change of Address Form');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (78,23,'Cheque');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (79,23,'Diocesan Multiple Transfer Form');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (80,23,'Diocesan Signatory Form');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (81,23,'Factsheet ');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (82,23,'Fuller Factsheet Charities Investment Fund');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (83,23,'Mandate Form ');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (84,23,'Nominee Renunciation Form');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (85,23,'Payment of Diocesan Quota by Standing Order');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (86,23,'Prospectus');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (87,23,'QRS Report');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (88,23,'Quarterly Bulletin');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (89,23,'Reports and Accounts Full Year ');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (90,23,'Reports and Accounts Half Year ');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (91,23,'Scheme Particular');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (92,23,'Single Deposit');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (93,23,'Socially Responsible Investment for Charities Brochure');
Insert into CCLA_INTERACTION_CATEGORY (INTERACTION_CATEGORY_ID,INTERACTION_SUBJECT_ID,CATEGORY) values (94,23,'Transfer of Units');

 /* rename entity_id column in ccla_account_intention*/
 alter table ccla_account_intention rename column entity_id to organisation_id;
 
 /* add fund code column to interaction table*/
 alter table ccla_interaction add fund_code  varchar2(2 CHAR);
 
 /* CREATE THE STUPID ACCOUNT TABLE */
   CREATE TABLE CCLA_ACCOUNT_AURORA_UPDATES
   (	"ACCOUNT_ID" NUMBER(15,0), 
    "UPDATE_TYPE" VARCHAR2(32 CHAR), 
	CONSTRAINT 		"CCLA_ACCOUNT_AURORA_UPDATES_FK" FOREIGN KEY ("ACCOUNT_ID") REFERENCES "ACCOUNT" ("ACCOUNT_ID") ENABLE
  );