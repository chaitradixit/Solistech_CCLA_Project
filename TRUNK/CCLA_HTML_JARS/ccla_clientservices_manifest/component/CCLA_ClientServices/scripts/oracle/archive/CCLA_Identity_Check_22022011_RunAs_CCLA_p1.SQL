
CREATE TABLE IDENTITY_CHECK (
   PERSON_ID Number(15,0) NOT NULL,
   IS_AUTHENTICATED Varchar2(10 CHAR),
   IS_EXPERIAN_AUTHENTICATED Varchar2(10 CHAR),
   AUTHENTICATION_INDEX Number,
   DECISION	Varchar2(20 CHAR),
   DECISION_TEXT Varchar2(255 CHAR),
   CHECK_DATE Timestamp(6),
   EXPIRY_DATE Timestamp(6),
   RECALCULATE_DATE Timestamp(6),
   RISK_CONDITIONS Varchar2(50 CHAR),
   RISK_CONDITIONS_TEXT Varchar2(2000 CHAR),
   REF_NO Varchar2(20 CHAR),
   TOTAL_HAPPY_SCORE Number,
   TOTAL_UNHAPPY_SCORE Number,
   LEGACY_CHECKED Number,
   MANUAL_OVERRIDE Number,
   CORE_DATA_CHANGED Number
)
/
ALTER TABLE IDENTITY_CHECK ADD CONSTRAINT IDCHECK_PK PRIMARY KEY (PERSON_ID)
/
ALTER TABLE IDENTITY_CHECK ADD CONSTRAINT PERSON_IDCHECK_FK FOREIGN KEY (PERSON_ID) REFERENCES PERSON (PERSON_ID)
/
COMMENT ON COLUMN IDENTITY_CHECK.IS_AUTHENTICATED IS 'FAILED=0, PASSED=1, UNCHECKED=2'
/

CREATE TABLE IDENTITY_CHECK_AUDIT(
  AUDIT_CHECK_ID Number NOT NULL,
  PERSON_ID Number(15,0) NOT NULL,
  CHECK_TYPE Varchar2(20 ) NOT NULL,
  USER_ID Varchar2(20 CHAR) NOT NULL,
  CHECK_DATE Timestamp(6),
  CHECK_DATA Varchar2(300 CHAR),
  DECISION Varchar2(20 CHAR),
  REF_NO Varchar2(20 CHAR)
)
/
ALTER TABLE IDENTITY_CHECK_AUDIT ADD CONSTRAINT AUDIT_CHECK_ID_PK PRIMARY KEY (AUDIT_CHECK_ID)
/
ALTER TABLE IDENTITY_CHECK_AUDIT ADD CONSTRAINT PERSON_IDCHKAUDIT_FK FOREIGN KEY (PERSON_ID) REFERENCES PERSON (PERSON_ID)
/


CREATE TABLE IDENTITY_CHECK_LOOKUP(
  OUTCOME_ID Number(12,0) NOT NULL,
  DESCRIPTION Varchar2(2000 CHAR),
  EXPERIAN_RISK_CODE Varchar2(20 CHAR),
  EXPERIAN_DECISION_CODE Varchar2(20 CHAR),
  EXPERIAN_DECISION_TEXT Varchar2(255 CHAR),
  HAPPY_SCORE Number,
  UNHAPPY_SCORE Number,
  FAIL_CONDITION Number,
  PASS_CONDITION Number,
  AMBER_CONDITION Number
)
/
ALTER TABLE IDENTITY_CHECK_LOOKUP ADD CONSTRAINT IDCHECK_LOOKUP_PK PRIMARY KEY (OUTCOME_ID)
/


CREATE TABLE IDENTITY_VALIDATION_CHECK(
  PERSON_ID Number(15,0) NOT NULL,
  DRIVING_LICENCE Varchar2(64 ),
  DRIVING_LICENCE_NAME Varchar2(64 CHAR),
  PASSPORT_NUMBER Varchar2(64 CHAR),
  UTILITY_MAILSORT Varchar2(64 CHAR),
  UTILITY_MAILSORT_DATE Timestamp(6),
  DRIVING_LICENCE_VALID Number(1,0),
  PASSPORT_VALID Number(1,0),
  MAILSORT_VALID Number(1,0),
  CROCKFORDS_ID Number(10,0),
  CROCKFORDS_VALUE Varchar2(50 CHAR),
  CROCKFORDS_VALID Number(1,0),
  DATE_LAST_UPDATED TIMESTAMP (6)
)
/
ALTER TABLE IDENTITY_VALIDATION_CHECK ADD CONSTRAINT IDVALCHK_PK PRIMARY KEY (PERSON_ID)
/
COMMENT ON COLUMN IDENTITY_VALIDATION_CHECK.DRIVING_LICENCE_VALID IS 'Failed=0, Pass=1'
/
COMMENT ON COLUMN IDENTITY_VALIDATION_CHECK.PASSPORT_VALID IS 'Failed=0, Pass=1'
/
COMMENT ON COLUMN IDENTITY_VALIDATION_CHECK.MAILSORT_VALID IS 'Failed=0, Pass=1'
/
COMMENT ON COLUMN IDENTITY_VALIDATION_CHECK.CROCKFORDS_VALID IS 'Failed=0, Pass=1'
/
ALTER TABLE IDENTITY_VALIDATION_CHECK ADD CONSTRAINT PERSON_IDVALCHK_FK FOREIGN KEY (PERSON_ID) REFERENCES PERSON (PERSON_ID)
/


/* Synonyms */
CREATE OR REPLACE PUBLIC SYNONYM IDENTITY_CHECK_LOOKUP FOR CCLA.IDENTITY_CHECK_LOOKUP;
CREATE OR REPLACE PUBLIC SYNONYM IDENTITY_VALIDATION_CHECK FOR CCLA.IDENTITY_VALIDATION_CHECK;
CREATE OR REPLACE PUBLIC SYNONYM IDENTITY_CHECK FOR CCLA.IDENTITY_CHECK;
CREATE OR REPLACE PUBLIC SYNONYM IDENTITY_CHECK_AUDIT FOR CCLA.IDENTITY_CHECK_AUDIT;
/* Grant Access */
GRANT ALL ON IDENTITY_CHECK_AUDIT TO UCMADMIN;
GRANT ALL ON IDENTITY_CHECK TO UCMADMIN;
GRANT ALL ON IDENTITY_VALIDATION_CHECK TO UCMADMIN;
GRANT ALL ON IDENTITY_CHECK_LOOKUP TO UCMADMIN;


/

