ALTER TABLE CS_FUND_TRANSFERS
ADD ( "ACCOUNT_STATUS" VARCHAR2(40 CHAR),
      "CLIENT_CONFIRMED" VARCHAR2(1 CHAR),
      "BATCHED_IN_AURORA" VARCHAR2(1 CHAR));

ALTER TABLE CS_PROCESSES
add CONSTRAINT CS_PROCESSES_PK PRIMARY KEY (PROCESS_ID);

CREATE OR REPLACE FORCE VIEW "CS_PROCESSES_LAST_EXCHANGE" 
("PROCESS_ID", "EXCHANGE_ID", "CORRESPONDENT_ID", "CLIENT_ID", "USER_ID", 
"EXCHANGE_DATE", "EXCHANGE_TYPE", "EXCHANGE_ACTION", "EXCHANGE_OUTCOME", "CONFIRM_TYPES", "CONFIRM_OTHER", 
"PROCESS_NAME", "PROCESS_STATUS", "COMPANY", "PROCESS_DATE", "LAST_ACTION", "PROCESS_CLIENT_ID") AS 
SELECT
pr."PROCESS_ID", 
ex."EXCHANGE_ID",
ex."CORRESPONDENT_ID",
ex."CLIENT_ID",
ex."USER_ID",
ex."EXCHANGE_DATE",
ex."EXCHANGE_TYPE",
ex."EXCHANGE_ACTION",
ex."EXCHANGE_OUTCOME",
ex."CONFIRM_TYPES",
ex."CONFIRM_OTHER",
pr.PROCESS_NAME, pr.PROCESS_STATUS, pr.COMPANY, pr.PROCESS_DATE, pr.LAST_ACTION, pr.CLIENT_ID AS PROCESS_CLIENT_ID
FROM CS_CORRESPONDENT_EXCHANGES ex INNER JOIN CS_PROCESSES pr ON ex.PROCESS_ID=pr.PROCESS_ID
WHERE EXCHANGE_ID IN
(
SELECT MAX(EXCHANGE_ID) FROM CS_CORRESPONDENT_EXCHANGES
GROUP BY PROCESS_ID
);

ALTER TABLE CS_FUND_TRANSFERS
add CONSTRAINT CS_FUND_TRANSFERS_PK PRIMARY KEY (TRANSFER_ID);

ALTER TABLE CS_PROCESS_NOTES
add CONSTRAINT CS_PROCESS_NOTES_PK PRIMARY KEY (NOTE_ID);

ALTER TABLE CS_CORRESPONDENT_EXCHANGES
add CONSTRAINT CS_CORRESPONDENT_EXCHANGES_PK PRIMARY KEY (EXCHANGE_ID);

ALTER TABLE CS_CORRESPONDENT_QUESTIONS
add CONSTRAINT CS_CORRESPONDENT_QUESTIONS_PK PRIMARY KEY (QUESTION_ID);

ALTER TABLE CS_FORM_MAP
add CONSTRAINT CS_FORM_MAP_PK PRIMARY KEY (FORM_ID);